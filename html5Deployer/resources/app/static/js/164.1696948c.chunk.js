(this["webpackJsonpgreen-sap"]=this["webpackJsonpgreen-sap"]||[]).push([[164],{901:function(e,t,r){"use strict";r.r(t);var a=r(11),n=r(2),i=r(5),o=r(6),l=r(7),c=r(0),s=(r(75),r(63)),u=r(23),p=r(131),b=r(12),y=r(309),d=r(25),O=r(27),v=r(1),f=(r(16),r(49)),h=(r(15),r(31)),j=r(10),g=r(30),_=r(174),m=r(426),S=r(444),k=r(887),T=r(322),w=r(250),R=r(428),W=r(314),U=r(312),A=r(417),L=r(249),D=r(888),P=r(156),C=r(119),J=r(840),N=r(45),B=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"],I=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).listMode="show",e.isReference=null,e.operationalLayerType="ArcGISTiledMapServiceLayer",e.resampling=!0,e.sourceJSON=null,e.spatialReference=null,e.path=null,e.sublayers=null,e.type="tile",e.url=null,e}return Object(i.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(a.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(b.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(d.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e,t=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}},{key:"readSpatialReference",value:function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&N.a.fromJSON(e)}},{key:"writeSublayers",value:function(e,t,r,n){if(this.loaded&&e){var i=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),o=[],l=Object(a.a)({writeSublayerStructure:!1},n);i.forEach((function(e){var t=e.write({},l);o.push(t)})),o.some((function(e){return Object.keys(e).length>1}))&&(t.layers=o)}}},{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},{key:"castTileServers",value:function(e){return Array.isArray(e)?e.map((function(e){return Object(O.K)(e).path})):null}},{key:"fetchTile",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=a.signal,i=a.timestamp,o=this.getTileUrl(e,t,r),l={responseType:"image",signal:n};return null!=i&&(l.query={_ts:a.timestamp}),Object(s.default)(o,l).then((function(e){return e.data}))}},{key:"getTileUrl",value:function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,i=Object(O.E)(Object(a.a)(Object(a.a)(Object(a.a)({},this.parsedUrl.query),{},{blankTile:!n&&null},this.customParameters),{},{token:this.apiKey})),o=this.tileServers;return"".concat(o&&o.length?o[t%o.length]:this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(r).concat(i?"?"+i:"")}},{key:"_fetchService",value:function(e){var t=this;return new Promise((function(r,n){if(t.sourceJSON){if(null!=t.sourceJSON.bandCount&&null!=t.sourceJSON.pixelSizeX)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");r({data:t.sourceJSON})}else{if(!t.parsedUrl)throw new u.a("tile-layer:undefined-url","layer's url is not defined");var i=Object(P.e)(t.parsedUrl.path);if(Object(b.i)(i)&&"ImageServer"===i.serverType)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Object(s.default)(t.parsedUrl.path,{query:Object(a.a)(Object(a.a)(Object(a.a)({f:"json"},t.parsedUrl.query),t.customParameters),{},{token:t.apiKey}),responseType:"json",signal:e}).then(r,n)}})).then((function(r){if(r.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=r.data,t.read(r.data,{origin:"service",url:t.parsedUrl}),10.1===t.version&&!Object(P.c)(t.url))return t._fetchServerVersion(t.url,e).then((function(e){t.read({currentVersion:e})})).catch((function(){}))}))}},{key:"_fetchServerVersion",value:function(e,t){if(!Object(P.b)(e))return Promise.reject();var r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Object(s.default)(r,{query:Object(a.a)(Object(a.a)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:t}).then((function(e){if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new u.a("tile-layer:version-not-available")}))}},{key:"_getMapName",value:function(e){var t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}},{key:"_getDefaultAttribution",value:function(e){if(e){var t;e=e.toLowerCase();for(var r=0,a=B.length;r<a;r++)if((t=B[r]).toLowerCase().indexOf(e)>-1)return Object(O.A)("//static.arcgis.com/attribution/"+t)}}},{key:"_getDefaultTileServers",value:function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]),r}(Object(w.a)(Object(D.a)(Object(L.a)(Object(A.a)(Object(W.a)(Object(U.a)(Object(S.a)(Object(k.a)(Object(T.a)(Object(y.a)(Object(p.b)(Object(m.a)(Object(R.a)(_.a))))))))))))));Object(c.a)([Object(v.b)({readOnly:!0})],I.prototype,"attributionDataUrl",null),Object(c.a)([Object(v.b)({type:["show","hide","hide-children"]})],I.prototype,"listMode",void 0),Object(c.a)([Object(v.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],I.prototype,"isReference",void 0),Object(c.a)([Object(v.b)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],I.prototype,"operationalLayerType",void 0),Object(c.a)([Object(v.b)({type:Boolean})],I.prototype,"resampling",void 0),Object(c.a)([Object(v.b)()],I.prototype,"sourceJSON",void 0),Object(c.a)([Object(v.b)({type:N.a})],I.prototype,"spatialReference",void 0),Object(c.a)([Object(h.a)("spatialReference",["spatialReference","tileInfo"])],I.prototype,"readSpatialReference",null),Object(c.a)([Object(v.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],I.prototype,"path",void 0),Object(c.a)([Object(v.b)({readOnly:!0})],I.prototype,"sublayers",void 0),Object(c.a)([Object(g.a)("sublayers",{layers:{type:[J.a]}})],I.prototype,"writeSublayers",null),Object(c.a)([Object(v.b)({json:{read:!1,write:!1}})],I.prototype,"popupEnabled",void 0),Object(c.a)([Object(v.b)()],I.prototype,"tileServers",null),Object(c.a)([Object(f.a)("tileServers")],I.prototype,"castTileServers",null),Object(c.a)([Object(v.b)({readOnly:!0,json:{read:!1}})],I.prototype,"type",void 0),Object(c.a)([Object(v.b)(C.n)],I.prototype,"url",void 0),(I=Object(c.a)([Object(j.a)("esri.layers.TileLayer")],I)).prototype.fetchTile.__isDefault__=!0;var M=I;t.default=M}}]);
//# sourceMappingURL=164.1696948c.chunk.js.map